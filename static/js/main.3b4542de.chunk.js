(this.webpackJsonp611463022_miniproject_webrtc=this.webpackJsonp611463022_miniproject_webrtc||[]).push([[0],{188:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(10),r=n.n(s),l=(n(84),n(28)),a=n(9),o=n(74),j=n.n(o),d=n(75),b=n.n(d),u=n(5),h=n(1),O=new j.a,m=O.connect(),x=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(""),r=Object(a.a)(s,2),o=r[0],j=r[1],d=Object(c.useState)(),x=Object(a.a)(d,2),f=x[0],g=x[1],p=Object(c.useState)(!1),y=Object(a.a)(p,2),v=y[0],w=y[1],C=Object(c.useState)(!1),F=Object(a.a)(C,2),S=F[0],N=F[1],k=Object(c.useState)(),z=Object(a.a)(k,2),D=z[0],I=z[1],M=Object(c.useState)([]),B=Object(a.a)(M,2),E=B[0],P=B[1],T=Object(c.useState)(),L=Object(a.a)(T,2),U=L[0],_=L[1],R=Object(c.useState)([]),W=Object(a.a)(R,2),J=W[0],V=W[1],K=Object(c.useState)(!1),Y=Object(a.a)(K,2),q=Y[0],A=Y[1],G=Object(c.useState)(!1),H=Object(a.a)(G,2),Q=H[0],X=H[1],Z=Object(c.useState)(!1),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(!1),ce=Object(a.a)(ne,2),ie=ce[0],se=ce[1],re=Object(c.useState)(!1),le=Object(a.a)(re,2),ae=le[0],oe=le[1],je=Object(c.useRef)(),de=Object(c.useRef)();document.title=n,Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){g(e),je.current&&(je.current.srcObject=e)})),O.on("open",(function(e){i(e)})),O.on("connection",(function(e){m=e,e.on("data",(function(e){w(!0),"id"===e.type?j(e.id):"message"===e.type?he(e):"file"===e.type&&Oe(e)}))})),O.on("disconnect",(function(){w(!1)})),O.on("call",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.answer(t),e.on("stream",(function(e){de.current.srcObject=e}))})).catch((function(e){console.error("Failed to get local stream",e)}))}))}),[P]);var be,ue,he=function(e){P((function(t){return[].concat(Object(l.a)(t),[{message:e.message,owner:!1}])}))},Oe=function(e){var t=new Blob([e.file],{type:e.filetype}),n=URL.createObjectURL(t);me({name:e.filename,url:n,size:e.size})},me=function(e){var t={name:e.name,url:e.url,size:e.size};V((function(e){return[].concat(Object(l.a)(e),[t])}))};f&&(be=Object(h.jsx)("video",{playsInline:!0,muted:!0,ref:je,autoPlay:!0,style:{maxWidth:"100%"}})),de&&(ue=Object(h.jsx)("video",{playsInline:!0,muted:!0,ref:de,autoPlay:!0,style:{maxWidth:"100%"}}));var xe=function(){te(!ee)},fe=function(){m.send({type:"message",message:D}),P((function(e){return[].concat(Object(l.a)(e),[{message:D,owner:!0}])})),I("")};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(u.j,{children:[Object(h.jsxs)(u.l,{className:"mt-2",children:[Object(h.jsxs)(u.h,{md:"6",children:[Object(h.jsxs)(u.a,{style:{marginBottom:"0"},children:["My Video | Peer is ",n]}),be]}),Object(h.jsxs)(u.h,{children:[Object(h.jsxs)(u.a,{theme:"secondary",style:{marginBottom:"0"},children:["Friend Video ",o?"| Peer is ".concat(o):""]}),ue]})]}),v?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(u.d,{children:[Object(h.jsxs)(u.g,{style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){se(!ie)},children:[Object(h.jsx)("div",{children:Object(h.jsx)("b",{children:"Chat With Your Friend"})}),Object(h.jsx)("div",{className:"text-right",children:"\u25bc"})]}),Object(h.jsxs)(u.i,{open:ie,children:[Object(h.jsx)(u.e,{children:Object(h.jsx)(u.l,{children:E&&E.map((function(e,t){return Object(h.jsx)(u.h,{md:"12",className:e.owner?"text-right":"text-left",children:Object(h.jsxs)(u.c,{outline:!0,pill:!0,theme:e.owner?"primary":"secondary",className:"mb-1",children:[" ",e.message," "]})})}))})}),Object(h.jsx)(u.f,{children:Object(h.jsxs)(u.l,{children:[Object(h.jsx)(u.h,{md:"9",children:Object(h.jsx)(u.k,{size:"lg",placeholder:"Enter Message",value:D,onKeyDown:function(e){"Enter"===e.key&&fe()},onChange:function(e){return I(e.target.value)}})}),Object(h.jsx)(u.h,{md:"3",className:"text-right",children:Object(h.jsx)(u.c,{size:"lg",onClick:fe,children:"Send Message"})})]})})]})]}),Object(h.jsxs)(u.d,{className:"mt-2",children:[Object(h.jsxs)(u.g,{style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){oe(!ae)},children:[Object(h.jsx)("div",{children:Object(h.jsx)("b",{children:"Sharing Files"})}),Object(h.jsx)("div",{children:"\u25bc"})]}),Object(h.jsxs)(u.i,{open:ae,children:[Object(h.jsx)(u.e,{children:J&&J.map((function(e,t){return Object(h.jsx)("ul",{className:"list-group",children:Object(h.jsxs)("li",{class:"list-group-item d-flex justify-content-between align-items-center",children:[Object(h.jsx)("a",{href:e.url,download:e.name,children:e.name}),Object(h.jsx)("span",{className:"badge bg-primary rounded-pill",children:b()(e.size)})]})},t)}))}),Object(h.jsx)(u.f,{children:Object(h.jsxs)(u.l,{children:[Object(h.jsx)(u.h,{md:"9",children:Object(h.jsx)(u.k,{type:"file",size:"lg",onChange:function(e){return _(e.target.files)}})}),Object(h.jsx)(u.h,{md:"3",className:"text-right",children:Object(h.jsx)(u.c,{size:"lg",disabled:!U,onClick:function(){var e=U[0];if(e.size<=5242880){var t=new Blob(U,{type:e.type});m.send({type:"file",file:t,filename:e.name,filetype:e.type,size:e.size})}else alert("The file is larger than 5 MB.")},children:"Send File"})})]})})]})]})]}):"",Object(h.jsx)(u.d,{className:"mt-2 mb-2",children:Object(h.jsx)(u.e,{children:v?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(u.l,{children:[Object(h.jsx)(u.h,{md:"3",children:ee?Object(h.jsx)(u.b,{theme:"danger",onMouseLeave:xe,onClick:function(){O.destroy(),window.location.reload(!1)},style:{cursor:"pointer"},children:Object(h.jsx)("h4",{style:{marginBottom:"0",padding:"10px",color:"#FFF"},children:"DisConnect"})}):Object(h.jsx)(u.b,{theme:"success",onMouseEnter:xe,children:Object(h.jsx)("h4",{style:{marginBottom:"0",padding:"10px",color:"#FFF"},children:"Connected Peer ID"})})}),Object(h.jsx)(u.h,{md:"9",children:Object(h.jsx)("h4",{style:{margin:"0",padding:"10px"},children:o})})]})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(u.l,{children:[Object(h.jsx)(u.l,{children:Object(h.jsxs)(u.h,{children:[Object(h.jsxs)("h4",{children:[Object(h.jsx)(u.b,{className:"mr-3",theme:"info",children:"My ID"}),Object(h.jsx)("label",{style:{cursor:"pointer"},id:"myId",onClick:function(){X(!Q),navigator.clipboard.writeText(n)},children:n})]}),Object(h.jsx)(u.m,{open:q,toggle:function(){A(!q)},target:"#myId",children:Q?"Copied":"Clicke to Coppy"})]})}),Object(h.jsxs)(u.l,{children:[Object(h.jsx)(u.h,{md:"10",children:Object(h.jsxs)("div",{className:"form-floating mb-3",children:[Object(h.jsx)("input",{type:"text",className:"form-control",id:"friendID",placeholder:"Enter Friend ID",value:o,onChange:function(e){return function(e){j(e.target.value),e.target.value.length>10?N(!0):N(!1)}(e)}}),Object(h.jsx)("label",{htmlFor:"friendID",children:"Enter Friend ID"})]})}),Object(h.jsx)(u.h,{md:"2",children:Object(h.jsx)(u.c,{size:"lg",pill:!0,theme:"success",disabled:!S,onClick:function(){(m=O.connect(o)).on("open",(function(){m.send({type:"id",id:o}),w(!0)})),m.on("data",(function(e){"message"===e.type?he(e):"file"===e.type&&Oe(e)})),O.on("error",(function(e){"peer-unavailable"===e.type?alert("The id or peer you're trying to connect to does not exist."):"webrtc"===e.type&&(alert("Native WebRTC errors."),O.destroy(),window.location.reload(!1))})),O.call(o,f).on("stream",(function(e){de.current.srcObject=e}))},children:"Connect"})})]})]})})})})]})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),s(e),r(e)}))};n(186),n(187);r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root")),f()},84:function(e,t,n){},85:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=85}},[[188,1,2]]]);
//# sourceMappingURL=main.3b4542de.chunk.js.map
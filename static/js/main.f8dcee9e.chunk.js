(this.webpackJsonp611463022_miniproject_webrtc=this.webpackJsonp611463022_miniproject_webrtc||[]).push([[0],{188:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(10),r=n.n(s),l=(n(84),n(28)),a=n(9),j=n(74),o=n.n(j),d=n(75),b=n.n(d),u=n(5),O=n(1),h=new o.a,m=h.connect(),x=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(""),r=Object(a.a)(s,2),j=r[0],o=r[1],d=Object(c.useState)(),x=Object(a.a)(d,2),f=x[0],p=x[1],g=Object(c.useState)(!1),y=Object(a.a)(g,2),v=y[0],w=y[1],C=Object(c.useState)(!1),F=Object(a.a)(C,2),S=F[0],N=F[1],k=Object(c.useState)(),z=Object(a.a)(k,2),D=z[0],I=z[1],M=Object(c.useState)([]),B=Object(a.a)(M,2),E=B[0],P=B[1],T=Object(c.useState)(),L=Object(a.a)(T,2),U=L[0],_=L[1],R=Object(c.useState)([]),W=Object(a.a)(R,2),J=W[0],V=W[1],K=Object(c.useState)(!1),Y=Object(a.a)(K,2),q=Y[0],A=Y[1],G=Object(c.useState)(!1),H=Object(a.a)(G,2),Q=H[0],X=H[1],Z=Object(c.useState)(!1),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(!1),ce=Object(a.a)(ne,2),ie=ce[0],se=ce[1],re=Object(c.useState)(!1),le=Object(a.a)(re,2),ae=le[0],je=le[1],oe=Object(c.useState)(!1),de=Object(a.a)(oe,2),be=de[0],ue=de[1],Oe=Object(c.useState)(!1),he=Object(a.a)(Oe,2),me=he[0],xe=he[1],fe=Object(c.useRef)(),pe=Object(c.useRef)();document.title=n,Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){p(e),fe.current&&(fe.current.srcObject=e)})),h.on("open",(function(e){i(e)})),h.on("connection",(function(e){m=e,e.on("data",(function(e){w(!0),"id"===e.type?o(e.id):"message"===e.type?ve(e):"file"===e.type?we(e):"audio"===e.type&&xe(e.state)}))})),h.on("disconnect",(function(){w(!1)})),h.on("call",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.answer(t),e.on("stream",(function(e){pe.current.srcObject=e}))})).catch((function(e){console.error("Failed to get local stream",e)}))}))}),[P]);var ge,ye,ve=function(e){P((function(t){return[].concat(Object(l.a)(t),[{message:e.message,owner:!1}])}))},we=function(e){var t=new Blob([e.file],{type:e.filetype}),n=URL.createObjectURL(t);Ce({name:e.filename,url:n,size:e.size})},Ce=function(e){var t={name:e.name,url:e.url,size:e.size};V((function(e){return[].concat(Object(l.a)(e),[t])}))};f&&(ge=Object(O.jsx)("video",{playsInline:!0,muted:!!be,ref:fe,autoPlay:!0,style:{maxWidth:"100%"}})),pe&&(ye=Object(O.jsx)("video",{playsInline:!0,muted:!me,ref:pe,autoPlay:!0,style:{maxWidth:"100%"}}));var Fe=function(){te(!ee)},Se=function(){D&&(m.send({type:"message",message:D}),P((function(e){return[].concat(Object(l.a)(e),[{message:D,owner:!0}])})),I(""))};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.j,{children:[Object(O.jsxs)(u.l,{className:"mt-2",children:[Object(O.jsxs)(u.h,{md:"6",children:[Object(O.jsxs)(u.a,{style:{marginBottom:"0",display:"flex",justifyContent:"space-between"},children:[Object(O.jsxs)("div",{children:["My Video | Peer is ",n]}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{className:be?"bi bi-mic-mute-fill":"bi bi-mic-fill",onClick:function(){ue(!be),m.send({type:"audio",state:be})}})})]}),ge]}),Object(O.jsxs)(u.h,{children:[Object(O.jsxs)(u.a,{theme:"secondary",style:{marginBottom:"0",display:"flex",justifyContent:"space-between"},children:[Object(O.jsxs)("div",{children:["Friend Video ",j?"| Peer is ".concat(j):""]}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{className:me?"bi bi-mic-fill":"bi bi-mic-mute-fill"})})]}),ye]})]}),v?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(u.d,{children:[Object(O.jsxs)(u.g,{style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){se(!ie)},children:[Object(O.jsx)("div",{children:Object(O.jsx)("b",{children:"Chat With Your Friend"})}),Object(O.jsx)("div",{className:"text-right",children:"\u25bc"})]}),Object(O.jsxs)(u.i,{open:ie,children:[Object(O.jsx)(u.e,{children:Object(O.jsx)(u.l,{children:E&&E.map((function(e,t){return Object(O.jsx)(u.h,{md:"12",className:e.owner?"text-right":"text-left",children:Object(O.jsxs)(u.c,{outline:!0,pill:!0,theme:e.owner?"primary":"secondary",className:"mb-1",children:[" ",e.message," "]})})}))})}),Object(O.jsx)(u.f,{children:Object(O.jsxs)(u.l,{children:[Object(O.jsx)(u.h,{md:"9",children:Object(O.jsx)(u.k,{size:"lg",placeholder:"Enter Message",value:D,onKeyDown:function(e){"Enter"===e.key&&Se()},onChange:function(e){return I(e.target.value)}})}),Object(O.jsx)(u.h,{md:"3",className:"text-right",children:Object(O.jsx)(u.c,{size:"lg",onClick:Se,children:"Send Message"})})]})})]})]}),Object(O.jsxs)(u.d,{className:"mt-2",children:[Object(O.jsxs)(u.g,{style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){je(!ae)},children:[Object(O.jsx)("div",{children:Object(O.jsx)("b",{children:"Sharing Files"})}),Object(O.jsx)("div",{children:"\u25bc"})]}),Object(O.jsxs)(u.i,{open:ae,children:[Object(O.jsx)(u.e,{children:J&&J.map((function(e,t){return Object(O.jsx)("ul",{className:"list-group",children:Object(O.jsxs)("li",{class:"list-group-item d-flex justify-content-between align-items-center",children:[Object(O.jsx)("a",{href:e.url,download:e.name,children:e.name}),Object(O.jsx)("span",{className:"badge bg-primary rounded-pill",children:b()(e.size)})]})},t)}))}),Object(O.jsx)(u.f,{children:Object(O.jsxs)(u.l,{children:[Object(O.jsx)(u.h,{md:"9",children:Object(O.jsx)(u.k,{type:"file",size:"lg",onChange:function(e){return _(e.target.files)}})}),Object(O.jsx)(u.h,{md:"3",className:"text-right",children:Object(O.jsx)(u.c,{size:"lg",disabled:!U,onClick:function(){var e=U[0];try{if(e.size>=5242880){var t=new Blob(U,{type:e.type});m.send({type:"file",file:t,filename:e.name,filetype:e.type,size:e.size})}else alert("The file is less than 5 MB.");_("")}catch(n){alert(n),_("")}},children:"Send File"})})]})})]})]})]}):"",Object(O.jsx)(u.d,{className:"mt-2 mb-2",children:Object(O.jsx)(u.e,{children:v?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.l,{children:[Object(O.jsx)(u.h,{md:"3",children:ee?Object(O.jsx)(u.b,{theme:"danger",onMouseLeave:Fe,onClick:function(){h.destroy(),window.location.reload(!1)},style:{cursor:"pointer"},children:Object(O.jsx)("h4",{style:{marginBottom:"0",padding:"10px",color:"#FFF"},children:"DisConnect"})}):Object(O.jsx)(u.b,{theme:"success",onMouseEnter:Fe,children:Object(O.jsx)("h4",{style:{marginBottom:"0",padding:"10px",color:"#FFF"},children:"Connected Peer ID"})})}),Object(O.jsx)(u.h,{md:"9",children:Object(O.jsx)("h4",{style:{margin:"0",padding:"10px"},children:j})})]})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.l,{children:[Object(O.jsx)(u.l,{children:Object(O.jsxs)(u.h,{children:[Object(O.jsxs)("h4",{children:[Object(O.jsx)(u.b,{className:"mr-3",theme:"info",children:"My ID"}),Object(O.jsx)("label",{style:{cursor:"pointer"},id:"myId",onClick:function(){X(!Q),navigator.clipboard.writeText(n)},children:n})]}),Object(O.jsx)(u.m,{open:q,toggle:function(){A(!q)},target:"#myId",children:Q?"Copied":"Clicke to Coppy"})]})}),Object(O.jsxs)(u.l,{children:[Object(O.jsx)(u.h,{md:"10",children:Object(O.jsxs)("div",{className:"form-floating mb-3",children:[Object(O.jsx)("input",{type:"text",className:"form-control",id:"friendID",placeholder:"Enter Friend ID",value:j,onChange:function(e){return function(e){o(e.target.value),e.target.value.length>10?N(!0):N(!1)}(e)}}),Object(O.jsx)("label",{htmlFor:"friendID",children:"Enter Friend ID"})]})}),Object(O.jsx)(u.h,{md:"2",children:Object(O.jsx)(u.c,{size:"lg",pill:!0,theme:"success",disabled:!S,onClick:function(){(m=h.connect(j)).on("open",(function(){m.send({type:"id",id:j}),w(!0)})),m.on("data",(function(e){"message"===e.type?ve(e):"file"===e.type?we(e):"audio"===e.type&&xe(e.state)})),h.on("error",(function(e){"peer-unavailable"===e.type?alert("The id or peer you're trying to connect to does not exist."):"webrtc"===e.type&&(alert("Native WebRTC errors."),h.destroy(),window.location.reload(!1))})),h.call(j,f).on("stream",(function(e){pe.current.srcObject=e}))},children:"Connect"})})]})]})})})})]})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),s(e),r(e)}))};n(186),n(187);r.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(x,{})}),document.getElementById("root")),f()},84:function(e,t,n){},85:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=85}},[[188,1,2]]]);
//# sourceMappingURL=main.f8dcee9e.chunk.js.map